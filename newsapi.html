<!DOCTYPE html>
<html>
<head>
	<title>newsapi</title>
	<link href="newsapi.css" rel="stylesheet" type="text/css">

<style>
body
{
	display: grid;
	
	align-items: center;
}
img
{
	
	height:200px;
	width:400px;
	margin-right: 10px;
	margin-bottom: 10px;
}
p
{
	color:red;
	font-size: 20px;
}
 div
{
	display: flex;
	border:3px solid black;
	
	text-align: center;
	width: 600px;
	height: 200px;
	margin:3px auto 3px auto;
}

</style>



</head>


<body>
	<header>
		<p><span id="headerimage">5</span><span id="headtext">The Top Five</span> <a href="" >NEWS</a></p>
	</header>

	<div id="content" class="content">
		<div id="heading">US NEWS</div>
		<div><ol class="list"></ol></div>
		<div id="heading">BBC NEWS</div>
		<div><ol class="list2"></ol></div>
		<div id="heading">THE WASHINGTON POST</div>
		<div><ol class="list3"></ol></div>
		<div id="heading">NEWYORK MAGAZINE</div>
		<div><ol class="list4"></ol></div>

	</div>

	
		

	
<script >
	window.onload=display;

var arr , myArray;
	function display()
	{
		var url = 'https://newsapi.org/v2/top-headlines?' +
          'country=us&' +
          'apiKey=14801299878447febf1405804ba97b23';
		var req = new Request(url);
		fetch(req)
    	.then(function(response) {
        //console.log(response.json());
        if (response.status !== 200) {
        console.log('Looks like there was a problem. Status Code: ' +
          response.status);
       var li=document.createElement("div");
        var ul=document.querySelector(".list");
        li.innerHTML="<h3>Some Error occurred</h3>";
        ul.appendChild(li);
        
        return;
      }

    
    response.json().then(function(data) {
    	
        
        	console.log(data);
        	myArray=arr=Array.from(data.articles.splice(1,5));
        	console.log(myArray);


 	  	var div=document.getElementById("content");
    	var ul=document.querySelector(".list");
    	for(var i=0;i<myArray.length;i++)
    	{
    	var li=document.createElement("li");
    	li.setAttribute("id", `${myArray[i].url}`);
    	li.setAttribute("onclick" , "showurl(this.id)");
    	var disp = (myArray[i].title);
    	var newcontent=document.createTextNode(disp);
    	li.appendChild(newcontent);
    	ul.appendChild(li);
    	console.log(disp);
    }
        	
	});

    	
})
    .catch(function() {
    	var li=document.createElement("div");
        var ul=document.querySelector(".list");
        li.innerHTML="<h3>Some Error occurred</h3>";
        ul.appendChild(li);

    })


    

    var url = 'https://newsapi.org/v2/top-headlines?sources=bbc-news&apiKey=14801299878447febf1405804ba97b23';
		var req = new Request(url);
		fetch(req)
    	.then(function(response) {
        //console.log(response.json());
        if (response.status !== 200) {
        console.log('Looks like there was a problem. Status Code: ' +
          response.status);
       var li=document.createElement("div");
        var ul=document.querySelector(".list2");
        li.innerHTML="<h3>Some Error occurred</h3>";
        ul.appendChild(li);
        
        return;
      }

    
    response.json().then(function(data) {
    	
        
        	console.log(data);
        	myArray=arr=Array.from(data.articles.splice(1,5));
        	console.log(myArray);


 	  	var div=document.getElementById("content");
    	var ul=document.querySelector(".list2");
    	for(var i=0;i<myArray.length;i++)
    	{
    	var li=document.createElement("li");
    	li.setAttribute("id", `${myArray[i].url}`);
    	li.setAttribute("onclick" , "showurl(this.id)");
    	var disp = (myArray[i].title);
    	var newcontent=document.createTextNode(disp);
    	li.appendChild(newcontent);
    	ul.appendChild(li);
    	console.log(disp);
    }
        	
	});

    	
})
    .catch(function() {
    	var li=document.createElement("div");
        var ul=document.querySelector(".list2");
        li.innerHTML="<h3>Some Error occurred</h3>";
        ul.appendChild(li);

    })

    var url = 'https://newsapi.org/v2/top-headlines?sources=the-washington-post&apiKey=14801299878447febf1405804ba97b23';
		var req = new Request(url);
		fetch(req)
    	.then(function(response) {
        //console.log(response.json());
        if (response.status !== 200) {
        console.log('Looks like there was a problem. Status Code: ' +
          response.status);
       var li=document.createElement("div");
        var ul=document.querySelector(".list3");
        li.innerHTML="<h3>Some Error occurred</h3>";
        ul.appendChild(li);
        
        return;
      }

    
    response.json().then(function(data) {
    	
        
        	console.log(data);
        	myArray=arr=Array.from(data.articles.splice(1,5));
        	console.log(myArray);


 	  	var div=document.getElementById("content");
    	var ul=document.querySelector(".list3");
    	for(var i=0;i<myArray.length;i++)
    	{
    	var li=document.createElement("li");
    	li.setAttribute("id", `${myArray[i].url}`);
    	li.setAttribute("onclick" , "showurl(this.id)");
    	var disp = (myArray[i].title);
    	var newcontent=document.createTextNode(disp);
    	li.appendChild(newcontent);
    	ul.appendChild(li);
    	console.log(disp);
    }
        	
	});

    	
})
    .catch(function() {
    	var li=document.createElement("div");
        var ul=document.querySelector(".list3");
        li.innerHTML="<h3>Some Error occurred</h3>";
        ul.appendChild(li);

    })


    var url = 'https://newsapi.org/v2/top-headlines?sources=new-york-magazine&apiKey=14801299878447febf1405804ba97b23';
		var req = new Request(url);
		fetch(req)
    	.then(function(response) {
        //console.log(response.json());
        if (response.status !== 200) {
        console.log('Looks like there was a problem. Status Code: ' +
          response.status);
       var li=document.createElement("div");
        var ul=document.querySelector(".list4");
        li.innerHTML="<h3>Some Error occurred</h3>";
        ul.appendChild(li);
        
        return;
      }

    
    response.json().then(function(data) {
    	
        
        	console.log(data);
        	myArray=arr=Array.from(data.articles.splice(1,5));
        	console.log(myArray);


 	  	var div=document.getElementById("content");
    	var ul=document.querySelector(".list4");
    	for(var i=0;i<myArray.length;i++)
    	{
    	var li=document.createElement("li");
    	li.setAttribute("id", `${myArray[i].url}`);
    	li.setAttribute("onclick" , "showurl(this.id)");
    	var disp = (myArray[i].title);
    	var newcontent=document.createTextNode(disp);
    	li.appendChild(newcontent);
    	ul.appendChild(li);
    	console.log(disp);
    }
        	
	});

    	
})
    .catch(function() {
    	var li=document.createElement("div");
        var ul=document.querySelector(".list4");
        li.innerHTML="<h3>Some Error occurred</h3>";
        ul.appendChild(li);

    })
}
 
 function showurl(clicked_id)
 {
 //console.log(clicked_id);
 window.open(`${clicked_id}`);


}
	</script>
	

</body>
</html>